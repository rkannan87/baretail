@startuml
title Current vs. New Process - BCAT Case Management

skinparam backgroundColor #FFFFFF
skinparam defaultFontSize 11
skinparam boxPadding 10

' Current Process
box "CURRENT PROCESS (Issues)" #FFE6E6
participant "SBH Digital" as SBH1
participant "SBH Pega" as Pega1
participant "BCAT" as BCAT1
participant "Work Hub\n(DDA)" as WH1
end box

note over SBH1,WH1 #FFCCCC
**Issue 1:** SBH creates child case in BCAS, updates via API
**Issue 2:** BCAT→Work Hub creates DUPLICATE cases (same Pega FCMR, no API)
end note

SBH1 -> Pega1: Create case
Pega1 -> BCAT1: Create child case for BCAS update
BCAT1 -> Pega1: Update via API
Pega1 -> SBH1: Update in Business Hub Summary

BCAT1 -> WH1: Create case from data feed (DDA)
note right: Duplicate case created!\nNo API integration

|||

' New Process
box "NEW PROCESS - Step 1" #E6F3FF
participant "POB" as POB
participant "BCAT System" as BCAT2
end box

note over POB
**Onboarding Flow**
POB creates new API
with client and account
information
end note

POB -> BCAT2: API call with client data\n(at end of onboarding)
note right #90EE90: ✓ API Integration

|||

box "NEW PROCESS - Step 2" #E6F3FF
participant "BCAT System" as BCAT3
end box

BCAT3 -> BCAT3: Auto-generate case\n(Pending Action)
BCAT3 -> BCAT3: Assign to fulfillment queue
note right #90EE90: ✓ Automated case creation

|||

box "NEW PROCESS - Steps 3-4 (Loop)" #FFF9E6
participant "BCAS Advisor" as BCAS
participant "EDRR" as EDRR
participant "Work Hub" as WH2
participant "Branch Advisor" as BA
end box

BCAS -> EDRR: Locate client\n(using CID/account #)
EDRR --> BCAS: Client documents
BCAS -> BCAS: Review documents
BCAS -> WH2: Submit with case status\n(completed, pending corrections, etc)

WH2 -> BA: Case appears in dashboard
BA -> BA: Work on pending corrections
BA -> WH2: Provide updates back to BCAS

note over BCAS,BA #FFFFCC
**Loop:** Steps 3 & 4 repeat until
BCAS review is Resolved/Completed
end note

alt Review Complete
    WH2 -> BCAS: Status: Resolved
else Corrections Needed
    WH2 -> BCAS: Status: Pending Corrections
    BCAS -> WH2: Resubmit after review
end

|||

box "NEW PROCESS - Step 5" #E6F3FF
participant "BCAT Final" as BCAT4
participant "POB Final" as POB2
end box

BCAT4 -> BCAT4: Review completed successfully
BCAT4 -> POB2: API trigger\n(acknowledgement)
note right #90EE90: ✓ Closed loop notification

|||

note over SBH1,POB2 #E6FFE6
**Future Consideration:**
Extend this process to replace existing BCAS solution
for cases initiated from Branch
end note

@enduml
